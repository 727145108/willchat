{"version":3,"sources":["login.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.js","sourcesContent":["var Login = function() {\r\n\r\n    var handleLogin = function() {\r\n\r\n        $('.login-form').validate({\r\n            errorElement: 'span', //default input error message container\r\n            errorClass: 'help-block', // default input error message class\r\n            focusInvalid: true, // do not focus the last invalid input\r\n            rules: {\r\n                name: {\r\n                    required: true\r\n                },\r\n                password: {\r\n                    required: true\r\n                },\r\n                remember: {\r\n                    required: false\r\n                }\r\n            },\r\n\r\n            messages: {\r\n                name: {\r\n                    required: \"请输入用户名.\"\r\n                },\r\n                password: {\r\n                    required: \"请输入密码.\"\r\n                }\r\n            },\r\n\r\n            invalidHandler: function(event, validator) { //display error alert on form submit\r\n                $('.alert-danger', $('.login-form')).show();\r\n            },\r\n\r\n            highlight: function(element) { // hightlight error inputs\r\n                $(element).closest('.form-group').addClass('has-error'); // set error class to the control group\r\n            },\r\n\r\n            success: function(label) {\r\n                label.closest('.form-group').removeClass('has-error');\r\n                label.remove();\r\n            },\r\n\r\n            errorPlacement: function(error, element) {\r\n                error.insertAfter(element.closest('.input-icon'));\r\n            },\r\n\r\n            submitHandler: function(form) {\r\n                var _form = $(form);\r\n                var url = _form.attr('action');\r\n                var formData = _form.serialize();\r\n\r\n                _form.find('.alert-danger span').html('');\r\n                _form.find('.alert-danger').addClass('hide');\r\n\r\n                $.post(url, formData, function(data, textStatus, xhr) {\r\n                    if (data.status) {\r\n                        location.href = data.url;\r\n                    } else {\r\n                        //登录失败则进行提示\r\n                        _form.find('.alert-danger span').html(data.info);\r\n                        _form.find('.alert-danger').removeClass('hide');\r\n                    };\r\n                }, 'json');\r\n                return false;\r\n            }\r\n        });\r\n\r\n        $('.login-form input').keypress(function(e) {\r\n            if (e.which == 13) {\r\n                if ($('.login-form').validate().form()) {\r\n                    $('.login-form').submit(); //form validation success, call ajax form submit\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n    };\r\n\r\n    var handleForgetPassword = function() {\r\n        // $('.forget-form').validate({\r\n        //     errorElement: 'span', //default input error message container\r\n        //     errorClass: 'help-block', // default input error message class\r\n        //     focusInvalid: false, // do not focus the last invalid input\r\n        //     ignore: \"\",\r\n        //     rules: {\r\n        //         email: {\r\n        //             required: true,\r\n        //             email: true\r\n        //         }\r\n        //     },\r\n\r\n        //     messages: {\r\n        //         email: {\r\n        //             required: \"请输入邮箱地址.\"\r\n        //         }\r\n        //     },\r\n\r\n        //     invalidHandler: function(event, validator) { //display error alert on form submit\r\n\r\n        //     },\r\n\r\n        //     highlight: function(element) { // hightlight error inputs\r\n        //         $(element)\r\n        //             .closest('.form-group').addClass('has-error'); // set error class to the control group\r\n        //     },\r\n\r\n        //     success: function(label) {\r\n        //         label.closest('.form-group').removeClass('has-error');\r\n        //         label.remove();\r\n        //     },\r\n\r\n        //     errorPlacement: function(error, element) {\r\n        //         error.insertAfter(element.closest('.input-icon'));\r\n        //     },\r\n\r\n        //     submitHandler: function(form) {\r\n        //         form.submit();\r\n        //     }\r\n        // });\r\n\r\n        // $('.forget-form input').keypress(function(e) {\r\n        //     if (e.which == 13) {\r\n        //         if ($('.forget-form').validate().form()) {\r\n        //             $('.forget-form').submit();\r\n        //         }\r\n        //         return false;\r\n        //     }\r\n        // });\r\n\r\n        // jQuery('#forget-password').click(function() {\r\n        //     jQuery('.login-form').hide();\r\n        //     jQuery('.forget-form').show();\r\n        // });\r\n\r\n        // jQuery('#back-btn').click(function() {\r\n        //     jQuery('.login-form').show();\r\n        //     jQuery('.forget-form').hide();\r\n        // });\r\n\r\n    };\r\n\r\n    var handleRegister = function() {\r\n\r\n        // function format(state) {\r\n        //     if (!state.id) return state.text; // optgroup\r\n        //     return \"<img class='flag' src='../../assets/global/img/flags/\" + state.id.toLowerCase() + \".png'/>&nbsp;&nbsp;\" + state.text;\r\n        // }\r\n\r\n        // if (jQuery().select2) {\r\n        //     $(\"#select2_sample4\").select2({\r\n        //         placeholder: '<i class=\"fa fa-map-marker\"></i>&nbsp;Select a Country',\r\n        //         allowClear: true,\r\n        //         formatResult: format,\r\n        //         formatSelection: format,\r\n        //         escapeMarkup: function(m) {\r\n        //             return m;\r\n        //         }\r\n        //     });\r\n\r\n\r\n        //     $('#select2_sample4').change(function() {\r\n        //         $('.register-form').validate().element($(this)); //revalidate the chosen dropdown value and show error or success message for the input\r\n        //     });\r\n        // }\r\n\r\n        // $('.register-form').validate({\r\n        //     errorElement: 'span', //default input error message container\r\n        //     errorClass: 'help-block', // default input error message class\r\n        //     focusInvalid: false, // do not focus the last invalid input\r\n        //     ignore: \"\",\r\n        //     rules: {\r\n        //         email: {\r\n        //             required: true,\r\n        //             email: true\r\n        //         },\r\n        //         username: {\r\n        //             required: true\r\n        //         },\r\n        //         password: {\r\n        //             required: true\r\n        //         },\r\n        //         rpassword: {\r\n        //             equalTo: \"#register_password\"\r\n        //         },\r\n        //         tnc: {\r\n        //             required: true\r\n        //         }\r\n        //     },\r\n\r\n        //     messages: { // custom messages for radio buttons and checkboxes\r\n        //         tnc: {\r\n        //             required: \"你必须同意《注册协议》.\"\r\n        //         }\r\n        //     },\r\n\r\n        //     invalidHandler: function(event, validator) { //display error alert on form submit\r\n\r\n        //     },\r\n\r\n        //     highlight: function(element) { // hightlight error inputs\r\n        //         $(element)\r\n        //             .closest('.form-group').addClass('has-error'); // set error class to the control group\r\n        //     },\r\n\r\n        //     success: function(label) {\r\n        //         label.closest('.form-group').removeClass('has-error');\r\n        //         label.remove();\r\n        //     },\r\n\r\n        //     errorPlacement: function(error, element) {\r\n        //         if (element.attr(\"name\") == \"tnc\") { // insert checkbox errors after the container\r\n        //             error.insertAfter($('#register_tnc_error'));\r\n        //         } else if (element.closest('.input-icon').size() === 1) {\r\n        //             error.insertAfter(element.closest('.input-icon'));\r\n        //         } else {\r\n        //             error.insertAfter(element);\r\n        //         }\r\n        //     },\r\n\r\n        //     submitHandler: function(form) {\r\n        //         form.submit();\r\n        //     }\r\n        // });\r\n\r\n        // $('.register-form input').keypress(function(e) {\r\n        //     if (e.which == 13) {\r\n        //         if ($('.register-form').validate().form()) {\r\n        //             $('.register-form').submit();\r\n        //         }\r\n        //         return false;\r\n        //     }\r\n        // });\r\n\r\n        // jQuery('#register-btn').click(function() {\r\n        //     jQuery('.login-form').hide();\r\n        //     jQuery('.register-form').show();\r\n        // });\r\n\r\n        // jQuery('#register-back-btn').click(function() {\r\n        //     jQuery('.login-form').show();\r\n        //     jQuery('.register-form').hide();\r\n        // });\r\n    };\r\n\r\n    return {\r\n        handleLogin: handleLogin,\r\n        handleForgetPassword: handleForgetPassword,\r\n        handleRegister: handleRegister\r\n    };\r\n}();"],"sourceRoot":"/source/"}